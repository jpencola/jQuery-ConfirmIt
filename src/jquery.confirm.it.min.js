(function(a){var b={init:function(b){return this.each(function(){function r(a,b,c){var d=window.confirm(c);if(!d){a.stopImmediatePropagation();var e=a.target.nodeName==="A";e&&a.preventDefault()}}function q(a){a.data("data-confirmit-ready",!0),a.bind(e.triggered_by+".confirmit",function(b){r(b,a,o(a))})}function p(a){var b=function(b){if(!a.data("data-confirmit-altered"))b.cancelBubble=!0;else return e.message};window.onbeforeunload=b}function o(a){var b,c=a.attr("class");b=a.attr("data-confirmit-message");if(!b)try{b=c.substring(c.indexOf("{")+1,c.lastIndexOf("}")).split(":")[1]}catch(d){}b||(b=e.message);return b}function n(a){var b=a.data("data-confirmit-deferred-callbacks");for(var c in b){var d=b[c].type,e=b[c].handler;a.bind(d,e)}}function m(a){a.unbind(e.triggered_by)}function l(a,b){for(var c in f)for(var d=0,g=f[c].length;d<g;d++){var h=f[c][d];h.type==e.triggered_by&&b.push({type:h.type,handler:h.handler})}a.data("data-confirmit-deferred-callbacks",b)}var c=a(this),d=!!c.data("data-confirmit-ready");if(!d){var e={triggered_by:"click",message:"Are you sure?",live:!1};b&&a.extend(e,b),e.live&&a("body").bind("DOMNodeInserted.confirmit",function(c){a(c.target).confirmIt("init",b)});if(e.triggered_by==="unload"){p(c),c.find("textarea, select, :text, checkbox,:radio, :password,:input[type='textarea'], :input[type='password'], :input[type='radio'], :input[type='checkbox'], :input[type='file']").change(function(){c.data("data-confirmit-altered",!0)}),c.find("textarea, :text").keydown(function(){c.data("data-confirmit-altered",!0)}),c.find(":submit").click(function(){c.data("data-confirmit-altered",!1)}),c.data("data-confirmit-triggered-by-unload",!0),c.data("data-confirmit-ready",!0);return}var f=c.data("events"),g=!!f,h=function(){try{return!!f[e.triggered_by]}catch(a){return!1}}();if(g&&h){var i=f[e.triggered_by],j=[];for(var k in i)l(c,j),m(c),q(c),n(c)}else q(c)}})},destroy:function(){return this.each(function(){var b=a(this);b.data("data-confirmit-triggered-by-unload")?(b.removeData("data-confirmit-triggered-by-unload"),b.removeData("data-confirmit-altered"),window.onbeforeunload=null):(b.unbind(".confirmit"),b.removeData("data-confirmit-deferred-callbacks")),b.removeData("data-confirmit-ready")})}};a.fn.confirmIt=function(a){if(b[a])return b[a].apply(this,Array.prototype.slice.call(arguments,1));typeof a=="string"&&(a={message:a});return b.init.apply(this,arguments)}})(jQuery)